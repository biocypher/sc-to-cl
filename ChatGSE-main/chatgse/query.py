import openai

# read key from key.txt
key = open('key.txt', 'r').read()

openai.api_key = key

MODEL = "gpt-3.5-turbo"
response = openai.ChatCompletion.create(
    model=MODEL,
    messages=[
        {"role": "system", "content": "You are an assistant to a biomedical researcher."},
        {"role": "system", "content": "Your role is to contextualise the user's findings with biomedical background knowledge. If provided with a list, please give granular feedback about the individual entities, your knowledge about them, and what they may mean in the context of the research."},
        {"role": "system", "content": "The topic of the research is high grade serous ovarian cancer."},
        {"role": "system", "content": "You can ask the user to provide explanations and more background, for instance on the treatment the patient has received."},
        {"role": "system", "content": "The user has generated experimental results for a cohort based on gene expression in the cancerous tissues."},
        {"role": "system", "content": "The analysis compares primary samples (taken at diagnosis) versus samples at the stage of chemoresistance."},
        {"role": "user", "content": "The primary samples show high activity of TGF-beta, Trail, and Estrogen signalling, and low activity of NF-kappaB, JAK-STAT, TNF-alpha, VEGF, MAPK, EGFR, Androgen, WNT, and PI3K signalling, relative to the residive samples."},
        {"role": "assistant", "content": "The findings suggest that the primary samples have a different gene expression profile compared to the samples at the stage of chemoresistance. The high activity of TGF-beta, Trail, and Estrogen signalling in the primary samples is consistent with previous studies that have shown that these pathways are involved in the development and progression of ovarian cancer. On the other hand, the low activity of NF-kappaB, JAK-STAT, TNF-alpha, VEGF, MAPK, EGFR, Androgen, WNT, and PI3K signalling in the primary samples is unexpected, as these pathways are known to be involved in cancer cell survival, proliferation, and invasion. \n\nIt is possible that the low activity of these pathways in the primary samples is due to the fact that the cancer cells are still in the early stages of development and have not yet acquired the ability to activate these pathways. Alternatively, it is possible that the low activity of these pathways is due to the fact that the cancer cells in the primary samples are more sensitive to chemotherapy and are therefore more likely to respond to treatment. \n\nThe high activity of these pathways in the samples at the stage of chemoresistance is consistent with the idea that these pathways are involved in the development of chemoresistance in ovarian cancer. It is possible that the cancer cells in the samples at the stage of chemoresistance have acquired the ability to activate these pathways in order to survive and proliferate in the presence of chemotherapy."},
        {"role": "user", "content": "In the same comparison, transcription factor activities were determined. The primary samples show elevation of TEAD1, BHLHE40, PRDM14, SOX11, POU5F1, MEIS1, HOXB13, ONECUT1, NANOG, and PBX3 relative to the recurrent samples, while showing decreased activity of ATF6, CREB3, TBX21, NR2C2, STAT2, IKZF1, FOXK2, LYL1, ELF1, and E2F4, compared to recurrent samples. Give a brief explanation of the function of each of these transcription factors and a longer, detailed explanation what their activities may mean in the context of this analysis."},
        {"role": "assistant", "content": "TEAD1 is a transcription factor that is involved in the regulation of cell proliferation and differentiation. BHLHE40 is a transcription factor that is involved in the regulation of circadian rhythms and cell differentiation. PRDM14 is a transcription factor that is involved in the regulation of stem cell pluripotency and differentiation. SOX11 is a transcription factor that is involved in the regulation of cell differentiation and development. POU5F1 (also known as OCT4) is a transcription factor that is involved in the regulation of stem cell pluripotency and differentiation. MEIS1 is a transcription factor that is involved in the regulation of cell differentiation and development. HOXB13 is a transcription factor that is involved in the regulation of cell differentiation and development. ONECUT1 is a transcription factor that is involved in the regulation of liver development and function. NANOG is a transcription factor that is involved in the regulation of stem cell pluripotency and differentiation. PBX3 is a transcription factor that is involved in the regulation of cell proliferation and differentiation. \n\nATF6 is a transcription factor that is involved in the regulation of the unfolded protein response and cell survival. CREB3 is a transcription factor that is involved in the regulation of cell proliferation and differentiation. TBX21 is a transcription factor that is involved in the regulation of T cell differentiation and function. NR2C2 is a transcription factor that is involved in the regulation of cell proliferation and differentiation. STAT2 is a transcription factor that is involved in the regulation of the immune response and cell proliferation. IKZF1 is a transcription factor that is involved in the regulation of B cell differentiation and function. FOXK2 is a transcription factor that is involved in the regulation of cell proliferation and differentiation. LYL1 is a transcription factor that is involved in the regulation of hematopoietic stem cell differentiation and function. ELF1 is a transcription factor that is involved in the regulation of the immune response and cell proliferation. E2F4 is a transcription factor that is involved in the regulation of cell cycle progression and DNA replication.\n\nThe elevation of TEAD1, BHLHE40, PRDM14, SOX11, POU5F1, MEIS1, HOXB13, ONECUT1, NANOG, and PBX3 in the primary samples relative to the recurrent samples suggests that these transcription factors may be involved in the early stages of ovarian cancer development. These transcription factors are known to be involved in the regulation of cell proliferation, differentiation, and stem cell pluripotency, which are all processes that are important in the development of cancer. The decreased activity of ATF6, CREB3, TBX21, NR2C2, STAT2, IKZF1, FOXK2, LYL1, ELF1, and E2F4 in the primary samples compared to the recurrent samples suggests that these transcription factors may be involved in the development of chemoresistance in ovarian cancer. These transcription factors are known to be involved in the regulation of cell survival, proliferation, and the immune response, which are all processes that are important in the development of chemoresistance. \n\nOverall, the findings suggest that the differential expression of these transcription factors may play a role in the development and progression of ovarian cancer, as well as in the development of chemoresistance. Further studies are needed to confirm these findings and to determine the specific roles of these transcription factors in ovarian cancer development and chemoresistance."}
    ],
    temperature=0,
)

print(response)